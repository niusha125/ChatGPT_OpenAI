"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createTree;

var _path = _interopRequireDefault(require("path"));

var _namify = _interopRequireDefault(require("namify"));

var _getFiles = _interopRequireDefault(require("./get-files"));

var _read = _interopRequireDefault(require("../read"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createTree(file, directory, options, schemas, recursive) {
  const obj = {};
  (0, _getFiles.default)([file], directory, options, recursive).forEach(item => {
    const content = (0, _read.default)(_path.default.join(item.cwd, item.directory, item.name), options, schemas); // Get keys

    let keys = _path.default.join(item.directory, item.name).split(_path.default.sep);

    keys[keys.length - 1] = _path.default.basename(keys[keys.length - 1], _path.default.extname(keys[keys.length - 1]));
    keys = keys.map(key => (0, _namify.default)(key)); // Content to obj keys

    let objKey = obj;

    for (let i = 0; i < keys.length; i++) {
      const key = keys[i];

      if (!objKey.hasOwnProperty(key)) {
        objKey[key] = i === keys.length - 1 ? content : {};
      }

      objKey = objKey[key];
    }
  });
  return obj;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9nZXQtc2NoZW1hL2NyZWF0ZS10cmVlLnRzIl0sIm5hbWVzIjpbImNyZWF0ZVRyZWUiLCJmaWxlIiwiZGlyZWN0b3J5Iiwib3B0aW9ucyIsInNjaGVtYXMiLCJyZWN1cnNpdmUiLCJvYmoiLCJmb3JFYWNoIiwiaXRlbSIsImNvbnRlbnQiLCJwYXRoIiwiam9pbiIsImN3ZCIsIm5hbWUiLCJrZXlzIiwic3BsaXQiLCJzZXAiLCJsZW5ndGgiLCJiYXNlbmFtZSIsImV4dG5hbWUiLCJtYXAiLCJrZXkiLCJvYmpLZXkiLCJpIiwiaGFzT3duUHJvcGVydHkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQUdlLFNBQVNBLFVBQVQsQ0FDYkMsSUFEYSxFQUViQyxTQUZhLEVBR2JDLE9BSGEsRUFJYkMsT0FKYSxFQUtiQyxTQUxhLEVBTVI7QUFDTCxRQUFNQyxHQUFRLEdBQUcsRUFBakI7QUFDQSx5QkFBUyxDQUFDTCxJQUFELENBQVQsRUFBaUJDLFNBQWpCLEVBQTRCQyxPQUE1QixFQUFxQ0UsU0FBckMsRUFBZ0RFLE9BQWhELENBQXlEQyxJQUFELElBQVU7QUFDaEUsVUFBTUMsT0FBTyxHQUFHLG1CQUNkQyxjQUFLQyxJQUFMLENBQVVILElBQUksQ0FBQ0ksR0FBZixFQUFvQkosSUFBSSxDQUFDTixTQUF6QixFQUFvQ00sSUFBSSxDQUFDSyxJQUF6QyxDQURjLEVBRWRWLE9BRmMsRUFHZEMsT0FIYyxDQUFoQixDQURnRSxDQU1oRTs7QUFDQSxRQUFJVSxJQUFJLEdBQUdKLGNBQUtDLElBQUwsQ0FBVUgsSUFBSSxDQUFDTixTQUFmLEVBQTBCTSxJQUFJLENBQUNLLElBQS9CLEVBQXFDRSxLQUFyQyxDQUEyQ0wsY0FBS00sR0FBaEQsQ0FBWDs7QUFDQUYsSUFBQUEsSUFBSSxDQUFDQSxJQUFJLENBQUNHLE1BQUwsR0FBYyxDQUFmLENBQUosR0FBd0JQLGNBQUtRLFFBQUwsQ0FDdEJKLElBQUksQ0FBQ0EsSUFBSSxDQUFDRyxNQUFMLEdBQWMsQ0FBZixDQURrQixFQUV0QlAsY0FBS1MsT0FBTCxDQUFhTCxJQUFJLENBQUNBLElBQUksQ0FBQ0csTUFBTCxHQUFjLENBQWYsQ0FBakIsQ0FGc0IsQ0FBeEI7QUFJQUgsSUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNNLEdBQUwsQ0FBVUMsR0FBRCxJQUFTLHFCQUFPQSxHQUFQLENBQWxCLENBQVAsQ0FaZ0UsQ0FjaEU7O0FBQ0EsUUFBSUMsTUFBTSxHQUFHaEIsR0FBYjs7QUFDQSxTQUFLLElBQUlpQixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHVCxJQUFJLENBQUNHLE1BQXpCLEVBQWlDTSxDQUFDLEVBQWxDLEVBQXNDO0FBQ3BDLFlBQU1GLEdBQUcsR0FBR1AsSUFBSSxDQUFDUyxDQUFELENBQWhCOztBQUNBLFVBQUksQ0FBQ0QsTUFBTSxDQUFDRSxjQUFQLENBQXNCSCxHQUF0QixDQUFMLEVBQWlDO0FBQy9CQyxRQUFBQSxNQUFNLENBQUNELEdBQUQsQ0FBTixHQUFjRSxDQUFDLEtBQUtULElBQUksQ0FBQ0csTUFBTCxHQUFjLENBQXBCLEdBQXdCUixPQUF4QixHQUFrQyxFQUFoRDtBQUNEOztBQUNEYSxNQUFBQSxNQUFNLEdBQUdBLE1BQU0sQ0FBQ0QsR0FBRCxDQUFmO0FBQ0Q7QUFDRixHQXZCRDtBQXdCQSxTQUFPZixHQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB5YW1sIGZyb20gJ2pzLXlhbWwnO1xuaW1wb3J0IG5hbWlmeSBmcm9tICduYW1pZnknO1xuaW1wb3J0IGdldEZpbGVzIGZyb20gJy4vZ2V0LWZpbGVzJztcbmltcG9ydCByZWFkIGZyb20gJ34vcmVhZCc7XG5pbXBvcnQgeyBJT3B0aW9ucyB9IGZyb20gJ34vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVUcmVlKFxuICBmaWxlOiBzdHJpbmcsXG4gIGRpcmVjdG9yeTogc3RyaW5nLFxuICBvcHRpb25zOiBJT3B0aW9ucyxcbiAgc2NoZW1hczogeWFtbC5TY2hlbWFbXSxcbiAgcmVjdXJzaXZlPzogYm9vbGVhblxuKTogYW55IHtcbiAgY29uc3Qgb2JqOiBhbnkgPSB7fTtcbiAgZ2V0RmlsZXMoW2ZpbGVdLCBkaXJlY3RvcnksIG9wdGlvbnMsIHJlY3Vyc2l2ZSkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSByZWFkKFxuICAgICAgcGF0aC5qb2luKGl0ZW0uY3dkLCBpdGVtLmRpcmVjdG9yeSwgaXRlbS5uYW1lKSxcbiAgICAgIG9wdGlvbnMsXG4gICAgICBzY2hlbWFzXG4gICAgKTtcbiAgICAvLyBHZXQga2V5c1xuICAgIGxldCBrZXlzID0gcGF0aC5qb2luKGl0ZW0uZGlyZWN0b3J5LCBpdGVtLm5hbWUpLnNwbGl0KHBhdGguc2VwKTtcbiAgICBrZXlzW2tleXMubGVuZ3RoIC0gMV0gPSBwYXRoLmJhc2VuYW1lKFxuICAgICAga2V5c1trZXlzLmxlbmd0aCAtIDFdLFxuICAgICAgcGF0aC5leHRuYW1lKGtleXNba2V5cy5sZW5ndGggLSAxXSlcbiAgICApO1xuICAgIGtleXMgPSBrZXlzLm1hcCgoa2V5KSA9PiBuYW1pZnkoa2V5KSk7XG5cbiAgICAvLyBDb250ZW50IHRvIG9iaiBrZXlzXG4gICAgbGV0IG9iaktleSA9IG9iajtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIW9iaktleS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIG9iaktleVtrZXldID0gaSA9PT0ga2V5cy5sZW5ndGggLSAxID8gY29udGVudCA6IHt9O1xuICAgICAgfVxuICAgICAgb2JqS2V5ID0gb2JqS2V5W2tleV07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cbiJdfQ==
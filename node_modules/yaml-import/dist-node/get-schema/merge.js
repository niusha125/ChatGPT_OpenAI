"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = merge;

var _mergeStrategies = require("merge-strategies");

var _constants = require("../constants");

const strategies = {
  shallow: _mergeStrategies.shallow,
  merge: _mergeStrategies.merge,
  deep: _mergeStrategies.deep
};

function merge(data, strategy = _constants.DEFAULT_STRATEGY) {
  if (strategy === 'sequence') return data.concat();
  const fn = strategies[strategy];
  if (!fn) throw Error(`Strategy ${strategy} is not valid`);
  if (!data.length) return;
  let ans = data[0];

  for (let i = 1; i < data.length; i++) {
    ans = fn(ans, data[i]);
  }

  return ans;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9nZXQtc2NoZW1hL21lcmdlLnRzIl0sIm5hbWVzIjpbInN0cmF0ZWdpZXMiLCJzaGFsbG93IiwibWVyZ2UiLCJfbWVyZ2UiLCJkZWVwIiwiZGF0YSIsInN0cmF0ZWd5IiwiREVGQVVMVF9TVFJBVEVHWSIsImNvbmNhdCIsImZuIiwiRXJyb3IiLCJsZW5ndGgiLCJhbnMiLCJpIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBRUEsTUFBTUEsVUFBVSxHQUFHO0FBQ2pCQyxFQUFBQSxPQUFPLEVBQVBBLHdCQURpQjtBQUVqQkMsRUFBQUEsS0FBSyxFQUFFQyxzQkFGVTtBQUdqQkMsRUFBQUEsSUFBSSxFQUFKQTtBQUhpQixDQUFuQjs7QUFNZSxTQUFTRixLQUFULENBQ2JHLElBRGEsRUFFYkMsUUFBbUIsR0FBR0MsMkJBRlQsRUFHUjtBQUNMLE1BQUlELFFBQVEsS0FBSyxVQUFqQixFQUE2QixPQUFPRCxJQUFJLENBQUNHLE1BQUwsRUFBUDtBQUM3QixRQUFNQyxFQUFFLEdBQUdULFVBQVUsQ0FBQ00sUUFBRCxDQUFyQjtBQUVBLE1BQUksQ0FBQ0csRUFBTCxFQUFTLE1BQU1DLEtBQUssQ0FBRSxZQUFXSixRQUFTLGVBQXRCLENBQVg7QUFDVCxNQUFJLENBQUNELElBQUksQ0FBQ00sTUFBVixFQUFrQjtBQUVsQixNQUFJQyxHQUFRLEdBQUdQLElBQUksQ0FBQyxDQUFELENBQW5COztBQUNBLE9BQUssSUFBSVEsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR1IsSUFBSSxDQUFDTSxNQUF6QixFQUFpQ0UsQ0FBQyxFQUFsQyxFQUFzQztBQUNwQ0QsSUFBQUEsR0FBRyxHQUFHSCxFQUFFLENBQUNHLEdBQUQsRUFBTVAsSUFBSSxDQUFDUSxDQUFELENBQVYsQ0FBUjtBQUNEOztBQUNELFNBQU9ELEdBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRTdHJhdGVneSB9IGZyb20gJ34vdHlwZXMnO1xuaW1wb3J0IHsgc2hhbGxvdywgbWVyZ2UgYXMgX21lcmdlLCBkZWVwIH0gZnJvbSAnbWVyZ2Utc3RyYXRlZ2llcyc7XG5pbXBvcnQgeyBERUZBVUxUX1NUUkFURUdZIH0gZnJvbSAnfi9jb25zdGFudHMnO1xuXG5jb25zdCBzdHJhdGVnaWVzID0ge1xuICBzaGFsbG93LFxuICBtZXJnZTogX21lcmdlLFxuICBkZWVwXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZXJnZShcbiAgZGF0YTogYW55W10sXG4gIHN0cmF0ZWd5OiBUU3RyYXRlZ3kgPSBERUZBVUxUX1NUUkFURUdZXG4pOiBhbnkge1xuICBpZiAoc3RyYXRlZ3kgPT09ICdzZXF1ZW5jZScpIHJldHVybiBkYXRhLmNvbmNhdCgpO1xuICBjb25zdCBmbiA9IHN0cmF0ZWdpZXNbc3RyYXRlZ3ldO1xuXG4gIGlmICghZm4pIHRocm93IEVycm9yKGBTdHJhdGVneSAke3N0cmF0ZWd5fSBpcyBub3QgdmFsaWRgKTtcbiAgaWYgKCFkYXRhLmxlbmd0aCkgcmV0dXJuO1xuXG4gIGxldCBhbnM6IGFueSA9IGRhdGFbMF07XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgIGFucyA9IGZuKGFucywgZGF0YVtpXSk7XG4gIH1cbiAgcmV0dXJuIGFucztcbn1cbiJdfQ==
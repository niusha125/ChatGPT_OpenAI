"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = fetch;

var _path = _interopRequireDefault(require("path"));

var _getFiles = _interopRequireDefault(require("./get-files"));

var _read = _interopRequireDefault(require("../read"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function fetch(payload, directory, options, schemas) {
  const paths = Array.isArray(payload.paths) ? payload.paths : [payload.paths];
  const files = (0, _getFiles.default)(paths, directory, options, payload.recursive);
  return files.map(file => (0, _read.default)(_path.default.join(file.cwd, file.directory, file.name), options, schemas)).concat(payload.hasOwnProperty('data') ? [payload.data] : []);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9nZXQtc2NoZW1hL2ZldGNoLnRzIl0sIm5hbWVzIjpbImZldGNoIiwicGF5bG9hZCIsImRpcmVjdG9yeSIsIm9wdGlvbnMiLCJzY2hlbWFzIiwicGF0aHMiLCJBcnJheSIsImlzQXJyYXkiLCJmaWxlcyIsInJlY3Vyc2l2ZSIsIm1hcCIsImZpbGUiLCJwYXRoIiwiam9pbiIsImN3ZCIsIm5hbWUiLCJjb25jYXQiLCJoYXNPd25Qcm9wZXJ0eSIsImRhdGEiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFHQTs7QUFDQTs7OztBQUVlLFNBQVNBLEtBQVQsQ0FDYkMsT0FEYSxFQUViQyxTQUZhLEVBR2JDLE9BSGEsRUFJYkMsT0FKYSxFQUtOO0FBQ1AsUUFBTUMsS0FBSyxHQUFHQyxLQUFLLENBQUNDLE9BQU4sQ0FBY04sT0FBTyxDQUFDSSxLQUF0QixJQUErQkosT0FBTyxDQUFDSSxLQUF2QyxHQUErQyxDQUFDSixPQUFPLENBQUNJLEtBQVQsQ0FBN0Q7QUFDQSxRQUFNRyxLQUFLLEdBQUcsdUJBQVNILEtBQVQsRUFBZ0JILFNBQWhCLEVBQTJCQyxPQUEzQixFQUFvQ0YsT0FBTyxDQUFDUSxTQUE1QyxDQUFkO0FBRUEsU0FBT0QsS0FBSyxDQUNURSxHQURJLENBQ0NDLElBQUQsSUFDSCxtQkFBS0MsY0FBS0MsSUFBTCxDQUFVRixJQUFJLENBQUNHLEdBQWYsRUFBb0JILElBQUksQ0FBQ1QsU0FBekIsRUFBb0NTLElBQUksQ0FBQ0ksSUFBekMsQ0FBTCxFQUFxRFosT0FBckQsRUFBOERDLE9BQTlELENBRkcsRUFJSlksTUFKSSxDQUlHZixPQUFPLENBQUNnQixjQUFSLENBQXVCLE1BQXZCLElBQWlDLENBQUNoQixPQUFPLENBQUNpQixJQUFULENBQWpDLEdBQWtELEVBSnJELENBQVA7QUFLRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHlhbWwgZnJvbSAnanMteWFtbCc7XG5pbXBvcnQgeyBJT3B0aW9ucywgSVBheWxvYWQgfSBmcm9tICd+L3R5cGVzJztcbmltcG9ydCBnZXRGaWxlcyBmcm9tICcuL2dldC1maWxlcyc7XG5pbXBvcnQgcmVhZCBmcm9tICd+L3JlYWQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmZXRjaChcbiAgcGF5bG9hZDogSVBheWxvYWQsXG4gIGRpcmVjdG9yeTogc3RyaW5nLFxuICBvcHRpb25zOiBJT3B0aW9ucyxcbiAgc2NoZW1hczogeWFtbC5TY2hlbWFbXVxuKTogYW55W10ge1xuICBjb25zdCBwYXRocyA9IEFycmF5LmlzQXJyYXkocGF5bG9hZC5wYXRocykgPyBwYXlsb2FkLnBhdGhzIDogW3BheWxvYWQucGF0aHNdO1xuICBjb25zdCBmaWxlcyA9IGdldEZpbGVzKHBhdGhzLCBkaXJlY3RvcnksIG9wdGlvbnMsIHBheWxvYWQucmVjdXJzaXZlKTtcblxuICByZXR1cm4gZmlsZXNcbiAgICAubWFwKChmaWxlKSA9PlxuICAgICAgcmVhZChwYXRoLmpvaW4oZmlsZS5jd2QsIGZpbGUuZGlyZWN0b3J5LCBmaWxlLm5hbWUpLCBvcHRpb25zLCBzY2hlbWFzKVxuICAgIClcbiAgICAuY29uY2F0KHBheWxvYWQuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSA/IFtwYXlsb2FkLmRhdGFdIDogW10pO1xufVxuIl19